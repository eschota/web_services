# Документация API сервиса free3d.online

Этот документ описывает внешние интерфейсы для поиска 3D‑моделей, доступа к их файлам и метаданным.

## 1. Поиск моделей (Semantic Search API)

Поиск работает на базе векторных эмбеддингов, что позволяет находить модели по смыслу запроса, а не только по точным совпадениям слов.

**Эндпоинт:** `https://free3d.online/api-embeddings/`
**Методы:** `GET`, `POST`

### Параметры запроса
| Параметр | Тип | Описание |
| :--- | :--- | :--- |
| `q` / `query` | string | **Обязательно.** Текстовый запрос (например, "humanoid robot", "sword"). |
| `topK` | int | Количество результатов (1-200, по умолчанию 20). |
| `type` | int | Фильтр по типу: `0` (модель), `1` (персонаж), `2` (материал), `3` (текстура), `4` (эффект). |
| `mode` | string | `clip` (быстрый) или `hybrid` (более точный, с переранжированием). |

### Пример ответа
```json
{
  "results": [
    {
      "guid": "uuid-string",
      "title": "Model Title",
      "score": 0.95,
      "glbUrl": "/data/uuid/uuid.glb",
      "previewSmallUrl": "/data/uuid/uuid._preview.jpg",
      "previewLargeUrl": "/data/uuid/uuid.jpg",
      "metaUrl": "/data/uuid/uuid.json"
    }
  ]
}
```

## 2. Доступ к статическим файлам (Data Storage)

Все файлы организованы по GUID модели и доступны через префикс `/data/`.

| Файл | Шаблон URL | Описание |
| :--- | :--- | :--- |
| **GLB модель** | `/data/{GUID}/{GUID}.glb` | Основной 3D файл для загрузки в WebGL/Unity. |
| **Web-превью** | `/data/{GUID}/{GUID}._preview.jpg` | Оптимизированное изображение 512x512. |
| **Full-превью** | `/data/{GUID}/{GUID}.jpg` | Качественное изображение (оригинал, конвертированный в JPG). |
| **Метаданные** | `/data/{GUID}/{GUID}.json` | JSON файл с полной информацией о модели. |

## 3. Формат метаданных (JSON)

Файл `.json` содержит структуру, подготовленную сервером ингеста:

```json
{
  "id": "guid",
  "title": "string",
  "type": 0,
  "categoryId": 10,
  "subcategoryId": 5
}
```

*Примечание: Фильтрация по `categoryId` в текущей версии API поиска выполняется на стороне клиента после получения результатов.*

