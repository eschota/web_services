<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QwertyStock VPN</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="logo">QS</div>
        <div>
          <h1 class="title">QwertyStock VPN</h1>
          <span class="version">v1.2.0</span>
        </div>
      </div>
      <div class="gateway-status" id="gatewayIndicator">
        <span class="status-dot" id="statusDot"></span>
        <span id="statusText">Checking...</span>
      </div>
    </header>

    <!-- Error Banner -->
    <div class="error-banner hidden" id="errorBanner">
      <span id="errorText"></span>
      <button class="btn-close" id="dismissError">&times;</button>
    </div>

    <!-- Main Toggle -->
    <section class="toggle-section">
      <div class="toggle-wrapper">
        <label class="toggle-switch">
          <input type="checkbox" id="proxyToggle">
          <span class="toggle-slider"></span>
        </label>
        <div class="toggle-label">
          <span id="toggleStatus">VPN OFF</span>
          <span class="proxy-info" id="proxyInfo">Not connected</span>
        </div>
      </div>
      <div class="toggle-actions">
        <select id="countrySelect" class="select-country">
          <option value="">Any Country</option>
          <option value="NL">Netherlands</option>
          <option value="US">United States</option>
          <option value="DE">Germany</option>
          <option value="GB">United Kingdom</option>
          <option value="FR">France</option>
          <option value="JP">Japan</option>
          <option value="SG">Singapore</option>
        </select>
        <button class="btn btn-secondary" id="refreshProxy" title="Get new proxy">
          &#8635; Refresh
        </button>
      </div>
    </section>

    <!-- Stats Overview -->
    <section class="stats-section">
      <div class="stat-card">
        <span class="stat-value" id="totalVps">0</span>
        <span class="stat-label">Total VPS</span>
      </div>
      <div class="stat-card">
        <span class="stat-value" id="onlineVps">0</span>
        <span class="stat-label">Online</span>
      </div>
      <div class="stat-card">
        <span class="stat-value" id="activeProxies">0</span>
        <span class="stat-label">Active</span>
      </div>
      <div class="stat-card">
        <span class="stat-value" id="avgTraffic">0</span>
        <span class="stat-label">Avg Gbps</span>
      </div>
    </section>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" data-tab="vps">VPS Nodes</button>
      <button class="tab" data-tab="domains">Domain Rules</button>
      <button class="tab" data-tab="settings">Settings</button>
    </div>

    <!-- VPS Table -->
    <section class="tab-content active" id="tab-vps">
      <div class="table-wrapper">
        <table class="vps-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Country</th>
              <th>Status</th>
              <th>Conns</th>
              <th>Traffic</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="vpsTableBody">
            <tr class="empty-row">
              <td colspan="6">Loading...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Domain Rules -->
    <section class="tab-content" id="tab-domains">
      <div class="domain-controls">
        <div class="mode-selector">
          <label class="radio-label">
            <input type="radio" name="domainMode" value="whitelist" checked> Whitelist
          </label>
          <label class="radio-label">
            <input type="radio" name="domainMode" value="blacklist"> Blacklist
          </label>
        </div>
        <div class="domain-add">
          <input type="text" id="domainInput" placeholder="example.com or *.example.com" class="input-domain">
          <button class="btn btn-primary" id="addDomain">Add</button>
        </div>
      </div>
      <div class="domain-list" id="domainList">
        <div class="empty-domains">No domains added yet</div>
      </div>
      <button class="btn btn-primary btn-full" id="syncDomains">Sync with Gateway</button>
    </section>

    <!-- Settings -->
    <section class="tab-content" id="tab-settings">
      <div class="settings-group">
        <label class="setting-label">Gateway URL</label>
        <input type="text" id="gatewayUrl" class="input-setting" value="https://autorig.online/vpn" readonly>
      </div>
      <div class="settings-group">
        <label class="setting-label">API Key</label>
        <input type="text" id="apiKeyInput" class="input-setting" placeholder="Your API key">
      </div>
      <div class="settings-group">
        <label class="setting-label">Client ID</label>
        <input type="text" id="clientIdInput" class="input-setting" placeholder="Your client ID">
      </div>
      <button class="btn btn-primary btn-full" id="saveSettings">Save Settings</button>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <span>QwertyStock VPN &copy; 2026</span>
      <button class="btn-link" id="refreshAll">Refresh All</button>
    </footer>
  </div>

  <script src="../utils/api.js"></script>
  <script src="popup.js"></script>
</body>
</html>
